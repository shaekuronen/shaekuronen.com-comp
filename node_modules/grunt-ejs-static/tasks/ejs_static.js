/*
 * grunt-ejs-static
 * https://github.com/shaekuronen/grunt-ejs-static
 *
 * Copyright (c) 2013 Shae Kuronen
 * Licensed under the MIT license.
 */

'use strict';

module.exports = function(grunt) {

  var ejs = require('ejs');
  var path = require('path');

  var ejs_static = require('../lib/ejs_static');

  // create grunt multitask
  grunt.registerMultiTask('ejs_static', 'Render EJS templates as static HTML.', function() {

    // set defaults for options
    var options = this.options({
      dest: 'preview',
      parent_dirs: false,
      file_extension: '.html',
      underscores_to_dashes: true
    });

    ejs_static.options = options;

    ejs_static.grunt = grunt;

    ejs_static.ejs = ejs;

    ejs_static.path = path;

    // start the ejs_static task
    ejs_static.data_validator(ejs_static);
    // end start the ejs_static task

  });

};
